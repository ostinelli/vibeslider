/**
 *  jQuery vibeSlider  Plugin
 *  @requires jQuery v1.3
 *  http://code.google.com/p/vibeslider/
 *
 *  Copyright (c)  Roberto Ostinelli (ostinelli.net)
 *  Released under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 * 
 *  Version: 0.1
 */
(function($){function roundTo(a){var i=this*Math.pow(10,a);i=Math.round(i);return i/Math.pow(10,a)}Number.prototype.roundTo=roundTo;var k=function(){this.initialize.apply(this,arguments)};k.prototype={value:0,size:0,knobSize:0,knobSpace:0,orientation:0,knobMouseDelta:0,dragging:false,space:0,opts:null,$this:null,knob:null,initialize:function(b,c){var d=this;d.opts=c;this.$this=$(b);this.$this.append('<div></div>');this.knob=this.$this.children('div');this.knob.css('position','absolute');this.knob.css('cursor','pointer');this.knob.css('margin','0');this.knob.css('padding','0');this.knob.mousedown(function(e){if(e.preventDefault){e.preventDefault()}});this.knob[0].ondragstart=function(){return false};var f=parseInt(this.$this.css('width'),10);if(f===0){f=this.$this.width()}var g=parseInt(this.$this.css('height'),10);if(g===0){g=this.$this.height()}if(this.opts.orientation=='auto'){if(f<g){this.orientation=1}}else{if(this.opts.orientation=='vertical'){this.orientation=1}}var p=this.$this.position();if(d.orientation===0){this.space=p.left;this.size=f;this.knobSize=parseInt(this.knob.css('width'),10);if(this.knobSize===0){this.knobSize=this.knob.width()}}else{this.space=p.top;this.size=g;this.knobSize=parseInt(this.knob.css('height'),10);if(this.knobSize===0){this.knobSize=this.knob.height()}}this.setValue(this.opts.value);if(this.$this.css('position')=='static'){this.$this.css('position','relative')}var h=function(a){if(a<0){a=0}if(a>d.size-d.knobSize){a=d.size-d.knobSize}d.knobSpace=a;d.value=((d.opts.maxValue-d.opts.minValue)*(d.knobSpace/(d.size-d.knobSize))+d.opts.minValue).roundTo(d.opts.roundTo);if(d.orientation===0){d.knob.css('left',a+'px')}else{d.knob.css('bottom',a+'px')}d.opts.slide.call(this,d.value)};var i=function(e){var a=0;if(d.orientation===0){a=e.pageX}else{a=-e.pageY}h(a-d.space-d.knobMouseDelta)};var j=function(e){d.dragging=false;d.opts.end.call(this,d.value);jQuery('body').unbind('mousemove',i);jQuery('body').unbind('mouseup',j)};this.knob.mousedown(function(e){d.dragging=true;d.opts.start.call(this,d.value);var a=0;if(d.orientation===0){a=e.pageX}else{a=-e.pageY}d.knobMouseDelta=a-d.space-d.knobSpace;jQuery('body').bind('mousemove',i);jQuery('body').bind('mouseup',j)});this.$this.click(function(e){d.opts.click.call(this,e);if(d.orientation===0){h(e.pageX-d.space-(d.knobSize/2))}else{h(d.space+d.size-e.pageY-(d.knobSize/2))}});this.$this.data('vibeSliderObj',this)},setValue:function(a){this.value=a.roundTo(this.opts.roundTo);var b=(this.size-this.knobSize)*a/(this.opts.maxValue-this.opts.minValue);this.knobSpace=b;if(this.orientation===0){this.knob.css('left',b+'px')}else{this.knob.css('bottom',b+'px')}this.opts.slide.call(this,this.value)}};$.vibeSlider={options:{minValue:0,maxValue:100,value:0,roundTo:0,orientation:'auto',slide:function(a){},click:function(e){},start:function(a){},end:function(a){}}};$.fn.extend({vibeSlider:function(a,b){if(a=='value'){if(typeof(b)=='undefined'){return $(this).data('vibeSliderObj').value}else{$(this).data('vibeSliderObj').setValue(b)}}else{var c=jQuery.extend({},$.vibeSlider.options,a);return this.each(function(){(new k(this,c))})}}})})(jQuery);