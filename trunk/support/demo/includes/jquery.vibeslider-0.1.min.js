/**
 *  jQuery vibeSlider  Plugin
 *  @requires jQuery v1.3
 *  http://code.google.com/p/vibeslider/
 *
 *  Copyright (c)  Roberto Ostinelli (ostinelli.net)
 *  Released under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 * 
 *  Version: 0.1
 */
(function($){function roundTo(a){var i=this*Math.pow(10,a);i=Math.round(i);return i/Math.pow(10,a)}Number.prototype.roundTo=roundTo;var g=function(){this.initialize.apply(this,arguments)};g.prototype={value:0,size:0,knobSize:0,knobSpace:0,orientation:null,knobMouseDelta:0,dragging:false,space:0,opts:null,$this:null,knob:null,initialize:function(a,b){var c=this;c.opts=b;this.$this=$(a);this.$this.append('<div></div>');this.knob=this.$this.children('div');this.knob.css('position','absolute');this.knob.css('cursor','pointer');this.knob.css('margin','0');this.knob.css('padding','0');this.knob.mousedown(function(e){if(e.preventDefault){e.preventDefault()}});this.knob[0].ondragstart=function(){return false};$(window).load(function(){c.initOnLoad()})},initOnLoad:function(){var b=this;this.orientation=0;if(this.opts.orientation=='auto'){if(this.$this.width()<this.$this.height()){this.orientation=1}}else{if(this.opts.orientation=='vertical'){this.orientation=1}}var p=this.$this.position();if(b.orientation===0){this.space=p.left;this.size=this.$this.width();this.knobSize=this.knob.width()}else{this.space=p.top;this.size=this.$this.height();this.knobSize=this.knob.height()}this.setValue(this.opts.value);if(this.$this.css('position')=='static'){this.$this.css('position','relative')}var c=function(a){if(a<0){a=0}if(a>b.size-b.knobSize){a=b.size-b.knobSize}b.knobSpace=a;b.value=((b.opts.maxValue-b.opts.minValue)*(b.knobSpace/(b.size-b.knobSize))+b.opts.minValue).roundTo(b.opts.roundTo);if(b.orientation===0){b.knob.css('left',a+'px')}else{b.knob.css('bottom',a+'px')}b.opts.slide.call(this,b.value)};var d=function(e){var a=0;if(b.orientation===0){a=e.pageX}else{a=-e.pageY}c(a-b.space-b.knobMouseDelta)};var f=function(e){b.dragging=false;b.opts.end.call(this,b.value);jQuery('body').unbind('mousemove',d);jQuery('body').unbind('mouseup',f)};this.knob.mousedown(function(e){b.dragging=true;b.opts.start.call(this,b.value);var a=0;if(b.orientation===0){a=e.pageX}else{a=-e.pageY}b.knobMouseDelta=a-b.space-b.knobSpace;jQuery('body').bind('mousemove',d);jQuery('body').bind('mouseup',f)});this.$this.click(function(e){b.opts.click.call(this,e);if(b.orientation===0){c(e.pageX-b.space-(b.knobSize/2))}else{c(b.space+b.size-e.pageY-(b.knobSize/2))}});this.$this.data('vibeSliderObj',this)},setValue:function(a){this.value=a.roundTo(this.opts.roundTo);var b=(this.size-this.knobSize)*a/(this.opts.maxValue-this.opts.minValue);this.knobSpace=b;if(this.orientation===0){this.knob.css('left',b+'px')}else{this.knob.css('bottom',b+'px')}this.opts.slide.call(this,this.value)}};$.vibeSlider={options:{minValue:0,maxValue:100,value:0,roundTo:0,orientation:'auto',slide:function(a){},click:function(e){},start:function(a){},end:function(a){}}};$.fn.extend({vibeSlider:function(a,b){if(a=='value'){if(typeof(b)=='undefined'){return $(this).data('vibeSliderObj').value}else{$(this).data('vibeSliderObj').setValue(b)}}else{var c=jQuery.extend({},$.vibeSlider.options,a);return this.each(function(){(new g(this,c))})}}})})(jQuery);